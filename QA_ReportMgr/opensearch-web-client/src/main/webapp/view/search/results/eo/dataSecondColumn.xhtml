<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:spb="http://www.spacebel.be/jsf"
                xmlns:ui="http://java.sun.com/jsf/facelets">    

    <h:panelGroup rendered="#{not empty presentItem.properties['eopPlatform'].groups and (empty presentItem.qualityIndicators) }">
        <ui:include src="platformAndInstrument.xhtml">
            <ui:param name="presentItem" value="#{presentItem}" />
        </ui:include>
    </h:panelGroup>

    <h:panelGroup rendered="#{presentItem.hasAcquisitionParameter and (empty presentItem.qualityIndicators)}">
        <ui:include src="acquisitionParameters.xhtml">
            <ui:param name="presentItem" value="#{presentItem}" />
        </ui:include>
    </h:panelGroup>

    <h:panelGroup rendered="#{not empty presentItem.additionalAttributes and (empty presentItem.qualityIndicators)}">
        <div class="details-unit">
            <div class="details-unit-header">								
                Additional attributes
            </div>
            <div class="details-unit-content">
                <h:outputText value="#{presentItem.additionalAttributes}" escape="false"/>                
            </div>
        </div>
    </h:panelGroup>

    <h:panelGroup rendered="#{presentItem.hasProductInfo}">
        <div class="details-unit">
            <div class="details-unit-header">								
                Product information
            </div>
            <div class="details-unit-content">
                <h:panelGroup rendered="#{not empty presentItem.properties['productFileUrl'].value}" style="position: relative;width: 98%;word-wrap: break-word;display: inline;">
                    <h:outputText value="File URL: " styleClass="details-text-label" />
                    <c:set var="productFileUrl" value="#{spb:validateUrl(presentItem.properties['productFileUrl'].value)}" />
                    <c:choose>
                        <c:when test="#{not empty productFileUrl}">
                            <a target="_blank" href="#{productFileUrl}" class="href-icon">
                                <h:outputText value="#{productFileUrl}" />
                            </a>	
                        </c:when>
                        <c:otherwise>
                            <h:outputText value="#{presentItem.properties['productFileUrl'].value}" />
                        </c:otherwise>
                    </c:choose>
                    <br/>
                </h:panelGroup>

                <h:panelGroup style="position: relative;width: 98%;word-wrap: break-word;display: inline;"							
                              rendered="#{empty presentItem.properties['productFileUrl'].value and not empty presentItem.properties['onlineResource'].value}">					
                    <h:outputText value="Online resource: " styleClass="details-text-label" />
                    <c:set var="productFileUrl" value="#{spb:validateUrl(presentItem.properties['onlineResource'].value)}" />
                    <c:choose>
                        <c:when test="#{not empty productFileUrl}">
                            <a target="_blank" href="#{productFileUrl}" class="href-icon">
                                <h:outputText value="#{productFileUrl}" />
                            </a>	
                        </c:when>
                        <c:otherwise>
                            <h:outputText value="#{presentItem.properties['onlineResource'].value}" />
                        </c:otherwise>
                    </c:choose>
                    <br/>
                </h:panelGroup>			

                <h:panelGroup rendered="#{not empty presentItem.properties['piArchivingCenter'].value}">
                    <h:outputText value="Archiving center: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piArchivingCenter'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piArchivingDate'].value}">
                    <h:outputText value="Archiving date: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piArchivingDate'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piAvailabilityTime'].value}">
                    <h:outputText value="Availability time: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piAvailabilityTime'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piCloudCover'].value}">
                    <h:outputText value="Cloud cover: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piCloudCover'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piCompositeType'].value}">
                    <h:outputText value="Composite type: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piCompositeType'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piFormat'].value}">
                    <h:outputText value="Format: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piFormat'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessingCenter'].value}">
                    <h:outputText value="Processing center: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessingCenter'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessingDate'].value}">
                    <h:outputText value="Processing date: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessingDate'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessingLevel'].value}">
                    <h:outputText value="Processing level: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessingLevel'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessingMethod'].value}">
                    <h:outputText value="Processing method: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessingMethod'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessingMethodVersion'].value}">
                    <h:outputText value="Processing method version: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessingMethodVersion'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessingMode'].value}">
                    <h:outputText value="Processing mode: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessingMode'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessorName'].value}">
                    <h:outputText value="Processor name: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessorName'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProcessorVersion'].value}">
                    <h:outputText value="Processor version: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProcessorVersion'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProductContentsType'].value}">
                    <h:outputText value="Product contents type: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProductContentsType'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProductContentsType'].value}">
                    <h:outputText value="Product group Id: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProductGroupId'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProductType'].value}">
                    <h:outputText value="Product type: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProductType'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piProductVersion'].value}">
                    <h:outputText value="Product version: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piProductVersion'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piQualityDegradation'].value}">
                    <h:outputText value="Quality Degradation: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piQualityDegradation'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piQualityDegradationQuotationMode'].value}">
                    <h:outputText value="Quality degradation quotation mode: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piQualityDegradationQuotationMode'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piQualityDegradationTag'].value}">
                    <h:outputText value="Quality degradation tag: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piQualityDegradationTag'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piQualityStatus'].value}">
                    <h:outputText value="Quality status: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piQualityStatus'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piReferenceSystemIdentifier'].value}">
                    <h:outputText value="Reference system identifier: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piReferenceSystemIdentifier'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piSize'].value}">
                    <h:outputText value="Size: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piSize'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piSnowCover'].value}">
                    <h:outputText value="Snow cover: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piSnowCover'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piStatusDetail'].value}">
                    <h:outputText value="Status detail: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piStatusDetail'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piStatusSubType'].value}">
                    <h:outputText value="Status sub type: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piStatusSubType'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piTimeliness'].value}">
                    <h:outputText value="Timeliness: " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piTimeliness'].value}" />
                    <br/>
                </h:panelGroup>

                <h:panelGroup rendered="#{not empty presentItem.properties['piType'].value}">
                    <h:outputText value="Type " styleClass="details-text-label" />
                    <h:outputText value="#{presentItem.properties['piType'].value}" />                    
                </h:panelGroup>
            </div>
        </div>	
    </h:panelGroup>

    <h:panelGroup rendered="#{not empty presentItem.voilaReportLink or not empty presentItem.isoReportLink or not empty presentItem.jupyterNotebookReportLink}">
        <div class="details-unit">
            <div class="details-unit-header">								
                Quality report information
            </div>
            <div class="details-unit-content">
                <h:panelGroup rendered="#{not empty presentItem.voilaReportLink}">
                    <h:outputText value="Online report: " styleClass="details-text-label" />
                    <a href="#{presentItem.voilaReportLink}" target="_blank" class="href-icon">view</a>
                    <br/>
                </h:panelGroup>
                <h:panelGroup rendered="#{not empty presentItem.jupyterNotebookReportLink}">
                    <h:outputText value="Jupyter notebook: " styleClass="details-text-label" />
                    <a href="#{presentItem.jupyterNotebookReportLink}" target="_blank" class="href-icon">download</a>
                    <br/>
                </h:panelGroup>
                <h:panelGroup rendered="#{not empty presentItem.isoReportLink}">
                    <h:outputText value="Quality report (ISO 19157-2): " styleClass="details-text-label" />                    
                    <a href="#{presentItem.isoReportLink}" target="_blank" class="href-icon">view</a>
                    <br/>
                </h:panelGroup>
            </div>
        </div>
    </h:panelGroup>
    
    <h:panelGroup rendered="#{not empty presentItem.qualityIndicators}">
        <div class="details-unit">
            <div class="details-unit-header">								
                Quality indicators
            </div>
            <div class="details-unit-content">
                <ui:include src="qualityIndicators.xhtml">
                    <ui:param name="presentItem" value="#{presentItem}" />
                </ui:include>
            </div>
        </div>
    </h:panelGroup>

</ui:composition>